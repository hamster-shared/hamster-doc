<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Template/solidity">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Solidity | Hamster Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hamsternet.io/docs/Template/solidity"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Solidity | Hamster Docs"><meta data-rh="true" name="description" content="Some solidity templates."><meta data-rh="true" property="og:description" content="Some solidity templates."><link data-rh="true" rel="canonical" href="https://hamsternet.io/docs/Template/solidity"><link data-rh="true" rel="alternate" href="https://hamsternet.io/docs/Template/solidity" hreflang="en"><link data-rh="true" rel="alternate" href="https://hamsternet.io/docs/Template/solidity" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.0251374f.css">
<link rel="preload" href="/docs/assets/js/runtime~main.fbb72bec.js" as="script">
<link rel="preload" href="/docs/assets/js/main.525dba21.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.png" alt="Hamster Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo.png" alt="Hamster Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hamster-shared" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Hamster Develop</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/get-started">Get Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/GetStarted/core_concepts">Core Concepts for DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/GetStarted/contract_project">Quickly start contract project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/GetStarted/frontend_project">Quickly start frontend project</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/projects">Projects</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Projects/Create a project">Create a project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Projects/Project Settings">Project Settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Projects/Manage Projects">Manage Projects</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/develop-workflows">Develop Workflows</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Develop Workflows/Check Contract">Check Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Develop Workflows/Build Contract">Build Contract</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Deploy Contracts/">Deploy Contracts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/projectops">ProjectOps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ProjectOps/Exploring Smart Contracts">Exploring Smart Contracts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/node-service">Node Service</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Node Service/Use RPC service">Use RPC service</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/category/template">Template</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Template/solidity">Solidity</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/aline-ci">ALine CI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/AlineCI/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/AlineCI/syntax">Pipeline Syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/AlineCI/plugins">ALine CI Action Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/category/release-note">Release Note</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ReleaseNote/release">Release Note</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/template"><span itemprop="name">Template</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Solidity</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Solidity</h1><p>Some solidity templates.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nfts">NFTs<a class="hash-link" href="#nfts" title="Direct link to heading">​</a></h2><p>Wo providers some NFT templates based on <a href="https://openzeppelin.com" target="_blank" rel="noopener noreferrer">openzeppelin</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nft-collection-contract-erc721">NFT Collection Contract (ERC721)<a class="hash-link" href="#nft-collection-contract-erc721" title="Direct link to heading">​</a></h3><p>ERC721 is a more complex standard than ERC20, with multiple optional extensions, and is split across a number of contracts. The OpenZeppelin Contracts provide flexibility regarding how these are combined, along with custom useful extensions. Check out the API Reference to learn more about these.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="constructing-an-erc721-token-contract">Constructing an ERC721 Token Contract<a class="hash-link" href="#constructing-an-erc721-token-contract" title="Direct link to heading">​</a></h4><p>We’ll use ERC721 to track items in our game, which will each have their own unique attributes. Whenever one is to be awarded to a player, it will be minted and sent to them. Players are free to keep their token or trade it with other people as they see fit, as they would any other asset on the blockchain! Please note any account can call awardItem to mint items. To restrict what accounts can mint items we can add Access Control.</p><p>Here’s what a contract for tokenized items might look like:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// SPDX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pragma solidity ^0.8.9;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/token/ERC721/ERC721Upgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/token/ERC721/extensions/ERC721EnumerableUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/token/ERC721/extensions/ERC721URIStorageUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/security/PausableUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/token/ERC721/extensions/ERC721BurnableUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/utils/cryptography/draft-EIP712Upgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/token/ERC721/extensions/draft-ERC721VotesUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/utils/CountersUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contract MyNFT is Initializable, ERC721Upgradeable, ERC721EnumerableUpgradeable, ERC721URIStorageUpgradeable, PausableUpgradeable, OwnableUpgradeable, ERC721BurnableUpgradeable, EIP712Upgradeable, ERC721VotesUpgradeable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    using CountersUpgradeable for CountersUpgradeable.Counter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    CountersUpgradeable.Counter private _tokenIdCounter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @custom:oz-upgrades-unsafe-allow constructor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _disableInitializers();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function initialize() initializer public {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __ERC721_init(&quot;MyNFT&quot;, &quot;MNFT&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __ERC721Enumerable_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __ERC721URIStorage_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __Pausable_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __Ownable_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __ERC721Burnable_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __EIP712_init(&quot;MyNFT&quot;, &quot;1&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __ERC721Votes_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function pause() public onlyOwner {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _pause();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function unpause() public onlyOwner {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _unpause();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function safeMint(address to, string memory uri) public onlyOwner {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        uint256 tokenId = _tokenIdCounter.current();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _tokenIdCounter.increment();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _safeMint(to, tokenId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _setTokenURI(tokenId, uri);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function _beforeTokenTransfer(address from, address to, uint256 tokenId, uint256 batchSize)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    internal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    whenNotPaused</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override(ERC721Upgradeable, ERC721EnumerableUpgradeable)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        super._beforeTokenTransfer(from, to, tokenId, batchSize);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The following functions are overrides required by Solidity.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function _afterTokenTransfer(address from, address to, uint256 tokenId, uint256 batchSize)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    internal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override(ERC721Upgradeable, ERC721VotesUpgradeable)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        super._afterTokenTransfer(from, to, tokenId, batchSize);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function _burn(uint256 tokenId)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    internal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override(ERC721Upgradeable, ERC721URIStorageUpgradeable)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        super._burn(tokenId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function tokenURI(uint256 tokenId)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    view</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override(ERC721Upgradeable, ERC721URIStorageUpgradeable)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    returns (string memory)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return super.tokenURI(tokenId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function supportsInterface(bytes4 interfaceId)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    view</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override(ERC721Upgradeable, ERC721EnumerableUpgradeable)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    returns (bool)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return super.supportsInterface(interfaceId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The ERC721URIStorage contract is an implementation of ERC721 that includes the metadata standard extensions (IERC721Metadata) as well as a mechanism for per-token metadata. That’s where the _setTokenURI method comes from: we use it to store an item’s metadata.</p><p>Also note that, unlike ERC20, ERC721 lacks a decimals field, since each token is distinct and cannot be partitioned.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="erc721communitystream-erc721">ERC721CommunityStream (ERC721)<a class="hash-link" href="#erc721communitystream-erc721" title="Direct link to heading">​</a></h3><p>ERC721 is a more complex standard than ERC20, with multiple optional extensions, and is split across a number of contracts. The OpenZeppelin Contracts provide flexibility regarding how these are combined, along with custom useful extensions. Check out the API Reference to learn more about these.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="constructing-an-erc721-token-contract-1">Constructing an ERC721 Token Contract<a class="hash-link" href="#constructing-an-erc721-token-contract-1" title="Direct link to heading">​</a></h4><p>We’ll use ERC721 to track items in our game, which will each have their own unique attributes. Whenever one is to be awarded to a player, it will be minted and sent to them. Players are free to keep their token or trade it with other people as they see fit, as they would any other asset on the blockchain! Please note any account can call awardItem to mint items. To restrict what accounts can mint items we can add Access Control.</p><p>Here’s what a contract for tokenized items might look like:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// SPDX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pragma solidity ^0.8.9;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/token/ERC721/ERC721Upgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contract MyNFT is Initializable, ERC721Upgradeable, OwnableUpgradeable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @custom:oz-upgrades-unsafe-allow constructor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    constructor() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _disableInitializers();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function initialize() initializer public {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __ERC721_init(&quot;MyNFT&quot;, &quot;MT&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        __Ownable_init();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The ERC721URIStorage contract is an implementation of ERC721 that includes the metadata standard extensions (IERC721Metadata) as well as a mechanism for per-token metadata. That’s where the _setTokenURI method comes from: we use it to store an item’s metadata.</p><p>Also note that, unlike ERC20, ERC721 lacks a decimals field, since each token is distinct and cannot be partitioned.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="erc4907">ERC4907<a class="hash-link" href="#erc4907" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a class="hash-link" href="#abstract" title="Direct link to heading">​</a></h4><p>This standard is an extension of EIP-721. It proposes an additional role (<code>user</code>) which can be granted to addresses, and a time where the role is automatically revoked (<code>expires</code>). The <code>user</code> role represents permission to &quot;use&quot; the NFT, but not the ability to transfer it or set users.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">​</a></h4><p>Some NFTs have certain utilities. For example, virtual land can be &quot;used&quot; to build scenes, and NFTs representing game assets can be &quot;used&quot; in-game. In some cases, the owner and user may not always be the same. There may be an owner of the NFT that rents it out to a “user”. The actions that a “user” should be able to take with an NFT would be different from the “owner” (for instance, “users” usually shouldn’t be able to sell ownership of the NFT).  In these situations, it makes sense to have separate roles that identify whether an address represents an “owner” or a “user” and manage permissions to perform actions accordingly.</p><p>Some projects already use this design scheme under different names such as “operator” or “controller” but as it becomes more and more prevalent, we need a unified standard to facilitate collaboration amongst all applications.</p><p>Furthermore, applications of this model (such as renting) often demand that user addresses have only temporary access to using the NFT. Normally, this means the owner needs to submit two on-chain transactions, one to list a new address as the new user role at the start of the duration and one to reclaim the user role at the end. This is inefficient in both labor and gas and so an “expires” function is introduced that would facilitate the automatic end of a usage term without the need of a second transaction.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="specification">Specification<a class="hash-link" href="#specification" title="Direct link to heading">​</a></h4><p>The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot; and &quot;OPTIONAL&quot; in this document are to be interpreted as described in RFC 2119.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="contract-interface">Contract Interface<a class="hash-link" href="#contract-interface" title="Direct link to heading">​</a></h5><p>Solidity Interface with NatSpec &amp; OpenZeppelin v4 Interfaces (also available at <a href="https://raw.githubusercontent.com/ethereum/EIPs/master/assets/eip-4907/contracts/IERC4907.sol" target="_blank" rel="noopener noreferrer"><code>IERC4907.sol</code></a>):</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface IERC4907 {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Logged when the user of an NFT is changed or expires is changed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice Emitted when the `user` of an NFT or the `expires` of the `user` is changed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// The zero address for user indicates that there is no user address</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    event UpdateUser(uint256 indexed tokenId, address indexed user, uint64 expires);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice set the user and expires of an NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev The zero address indicates there is no user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// Throws if `tokenId` is not valid NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param user  The new user of the NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param expires  UNIX timestamp, The new user could use the NFT before expires</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function setUser(uint256 tokenId, address user, uint64 expires) external;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice Get the user address of an NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev The zero address indicates that there is no user or the user is expired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param tokenId The NFT to get the user address for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @return The user address for this NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function userOf(uint256 tokenId) external view returns(address);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice Get the user expires of an NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev The zero value indicates that there is no user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param tokenId The NFT to get the user expires for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @return The user expires for this NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function userExpires(uint256 tokenId) external view returns(uint256);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>userOf(uint256 tokenId)</code> function MAY be implemented as <code>pure</code> or <code>view</code>.</p><p>The <code>userExpires(uint256 tokenId)</code> function MAY be implemented as <code>pure</code> or <code>view</code>.</p><p>The <code>setUser(uint256 tokenId, address user, uint64 expires)</code> function MAY be implemented as <code>public</code> or <code>external</code>.</p><p>The <code>UpdateUser</code> event MUST be emitted when a user address is changed or the user expires is changed.</p><p>The <code>supportsInterface</code> method MUST return <code>true</code> when called with <code>0xad092b5c</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rationale">Rationale<a class="hash-link" href="#rationale" title="Direct link to heading">​</a></h4><p>This model is intended to facilitate easy implementation. Here are some of the problems that are solved by this standard:</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="clear-rights-assignment">Clear Rights Assignment<a class="hash-link" href="#clear-rights-assignment" title="Direct link to heading">​</a></h5><p>With Dual “owner” and “user” roles, it becomes significantly easier to manage what lenders and borrowers can and cannot do with the NFT (in other words, their rights). Additionally, owners can control who the user is and it’s easy for other projects to assign their own rights to either the owners or the users.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="simple-on-chain-time-management">Simple On-chain Time Management<a class="hash-link" href="#simple-on-chain-time-management" title="Direct link to heading">​</a></h5><p>Once a rental period is over, the user role needs to be reset and the “user” has to lose access to the right to use the NFT. This is usually accomplished with a second on-chain transaction but that is gas inefficient and can lead to complications because it’s imprecise. With the <code>expires</code> function, there is no need for another transaction because the “user” is invalidated automatically after the duration is over.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="easy-third-party-integration">Easy Third-Party Integration<a class="hash-link" href="#easy-third-party-integration" title="Direct link to heading">​</a></h5><p>In the spirit of permission less interoperability, this standard makes it easier for third-party protocols to manage NFT usage rights without permission from the NFT issuer or the NFT application. Once a project has adopted the additional <code>user</code> role and <code>expires</code>, any other project can directly interact with these features and implement their own type of transaction. For example, a PFP NFT using this standard can be integrated into both a rental platform where users can rent the NFT for 30 days AND, at the same time, a mortgage platform where users can use the NFT while eventually buying ownership of the NFT with installment payments. This would all be done without needing the permission of the original PFP project.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility">Backwards Compatibility<a class="hash-link" href="#backwards-compatibility" title="Direct link to heading">​</a></h4><p>As mentioned in the specifications section, this standard can be fully EIP-721 compatible by adding an extension function set.</p><p>In addition, new functions introduced in this standard have many similarities with the existing functions in EIP-721. This allows developers to easily adopt the standard quickly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reference-implementation">Reference Implementation<a class="hash-link" href="#reference-implementation" title="Direct link to heading">​</a></h4><p>Implementation: <a href="https://raw.githubusercontent.com/ethereum/EIPs/master/assets/eip-4907/contracts/ERC4907.sol" target="_blank" rel="noopener noreferrer"><code>ERC4907.sol</code></a></p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// SPDX-License-Identifier: CC0-1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC721/ERC721.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contract ERC4907 is ERC721, IERC4907 {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    struct UserInfo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        address user;   // address of user role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        uint64 expires; // unix timestamp, user expires</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mapping (uint256  =&gt; UserInfo) internal _users;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    constructor(string memory name_, string memory symbol_)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ERC721(name_,symbol_)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice set the user and expires of a NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev The zero address indicates there is no user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// Throws if `tokenId` is not valid NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param user  The new user of the NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param expires  UNIX timestamp, The new user could use the NFT before expires</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function setUser(uint256 tokenId, address user, uint64 expires) public virtual override{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        require(_isApprovedOrOwner(msg.sender, tokenId),&quot;ERC721: transfer caller is not owner nor approved&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        UserInfo storage info =  _users[tokenId];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        info.user = user;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        info.expires = expires;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        emit UpdateUser(tokenId,user,expires);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice Get the user address of an NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev The zero address indicates that there is no user or the user is expired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param tokenId The NFT to get the user address for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @return The user address for this NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function userOf(uint256 tokenId)public view virtual override returns(address){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if( uint256(_users[tokenId].expires) &gt;=  block.timestamp){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return  _users[tokenId].user;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return address(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @notice Get the user expires of an NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev The zero value indicates that there is no user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @param tokenId The NFT to get the user expires for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @return The user expires for this NFT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function userExpires(uint256 tokenId) public view virtual override returns(uint256){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return _users[tokenId].expires;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /// @dev See {IERC165-supportsInterface}.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return interfaceId == type(IERC4907).interfaceId || super.supportsInterface(interfaceId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    function _beforeTokenTransfer(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        address from,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        address to,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        uint256 tokenId,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        uint256 batchSize</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ) internal virtual override{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        super._beforeTokenTransfer(from, to, tokenId,batchSize);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (from != to &amp;&amp; _users[tokenId].user != address(0)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            delete _users[tokenId];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            emit UpdateUser(tokenId, address(0), 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security Considerations<a class="hash-link" href="#security-considerations" title="Direct link to heading">​</a></h4><p>This EIP standard can completely protect the rights of the owner, the owner can change the NFT user and expires at any time.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="edition-erc1155">Edition (ERC1155)<a class="hash-link" href="#edition-erc1155" title="Direct link to heading">​</a></h3><p>ERC1155 is a novel token standard that aims to take the best from previous standards to create a fungibility-agnostic and gas-efficient token contract.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-token-standard">Multi Token Standard<a class="hash-link" href="#multi-token-standard" title="Direct link to heading">​</a></h4><p>The distinctive feature of ERC1155 is that it uses a single smart contract to represent multiple tokens at once. This is why its balanceOf function differs from ERC20’s and ERC777’s: it has an additional id argument for the identifier of the token that you want to query the balance of.</p><p>This is similar to how ERC721 does things, but in that standard a token id has no concept of balance: each token is non-fungible and exists or doesn’t. The ERC721 balanceOf function refers to how many different tokens an account has, not how many of each. On the other hand, in ERC1155 accounts have a distinct balance for each token id, and non-fungible tokens are implemented by simply minting a single one of them.</p><p>This approach leads to massive gas savings for projects that require multiple tokens. Instead of deploying a new contract for each token type, a single ERC1155 token contract can hold the entire system state, reducing deployment costs and complexity.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="batch-operations">Batch Operations<a class="hash-link" href="#batch-operations" title="Direct link to heading">​</a></h4><p>Because all state is held in a single contract, it is possible to operate over multiple tokens in a single transaction very efficiently. The standard provides two functions, balanceOfBatch and safeBatchTransferFrom, that make querying multiple balances and transferring multiple tokens simpler and less gas-intensive.</p><p>In the spirit of the standard, we’ve also included batch operations in the non-standard functions, such as _mintBatch.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="constructing-an-erc1155-token-contract">Constructing an ERC1155 Token Contract<a class="hash-link" href="#constructing-an-erc1155-token-contract" title="Direct link to heading">​</a></h4><p>We’ll use ERC1155 to track multiple items in our game, which will each have their own unique attributes. We mint all items to the deployer of the contract, which we can later transfer to players. Players are free to keep their tokens or trade them with other people as they see fit, as they would any other asset on the blockchain!</p><p>For simplicity we will mint all items in the constructor but you could add minting functionality to the contract to mint on demand to players.</p><p>Here’s what a contract for tokenized items might look like:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// contracts/GameItems.sol</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// SPDX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC1155/ERC1155.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contract GameItems is ERC1155 {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uint256 public constant GOLD = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uint256 public constant SILVER = 1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uint256 public constant THORS_HAMMER = 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uint256 public constant SWORD = 3;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uint256 public constant SHIELD = 4;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    constructor() ERC1155(&quot;https://game.example/api/item/{id}.json&quot;) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _mint(msg.sender, GOLD, 10**18, &quot;&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _mint(msg.sender, SILVER, 10**27, &quot;&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _mint(msg.sender, THORS_HAMMER, 1, &quot;&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _mint(msg.sender, SWORD, 10**9, &quot;&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _mint(msg.sender, SHIELD, 10**9, &quot;&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="defi">Defi<a class="hash-link" href="#defi" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gamefi">GameFi<a class="hash-link" href="#gamefi" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="daos--governance">DAOs &amp; Governance<a class="hash-link" href="#daos--governance" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-erc20">Token (ERC20)<a class="hash-link" href="#token-erc20" title="Direct link to heading">​</a></h3><p>An ERC20 token contract keeps track of fungible tokens: any one token is exactly equal to any other token; no tokens have special rights or behavior associated with them. This makes ERC20 tokens useful for things like a medium of exchange currency, voting rights, staking, and more.</p><p>OpenZeppelin Contracts provides many ERC20-related contracts. On the API reference you’ll find detailed information on their properties and usage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="constructing-an-erc20-token-contract">Constructing an ERC20 Token Contract<a class="hash-link" href="#constructing-an-erc20-token-contract" title="Direct link to heading">​</a></h4><p>Using Contracts, we can easily create our own ERC20 token contract, which will be used to track Gold (GLD), an internal currency in a hypothetical game.</p><p>Here’s what our GLD token might look like.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// contracts/GLDToken.sol</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// SPDX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contract GLDToken is ERC20 {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    constructor(uint256 initialSupply) ERC20(&quot;Gold&quot;, &quot;GLD&quot;) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        _mint(msg.sender, initialSupply);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Openzeppelin contracts are often used via inheritance, and here we’re reusing ERC20 for both the basic standard implementation and the name, symbol, and decimals optional extensions. Additionally, we’re creating an initialSupply of tokens, which will be assigned to the address that deploys the contract.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hamster-shared/gitbook/blob/main/docs/Template/solidity.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/template"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Template</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/aline-ci"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ALine CI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nfts" class="table-of-contents__link toc-highlight">NFTs</a><ul><li><a href="#nft-collection-contract-erc721" class="table-of-contents__link toc-highlight">NFT Collection Contract (ERC721)</a></li><li><a href="#erc721communitystream-erc721" class="table-of-contents__link toc-highlight">ERC721CommunityStream (ERC721)</a></li><li><a href="#erc4907" class="table-of-contents__link toc-highlight">ERC4907</a></li><li><a href="#edition-erc1155" class="table-of-contents__link toc-highlight">Edition (ERC1155)</a></li></ul></li><li><a href="#defi" class="table-of-contents__link toc-highlight">Defi</a></li><li><a href="#gamefi" class="table-of-contents__link toc-highlight">GameFi</a></li><li><a href="#daos--governance" class="table-of-contents__link toc-highlight">DAOs &amp; Governance</a><ul><li><a href="#token-erc20" class="table-of-contents__link toc-highlight">Token (ERC20)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                  <a class="social-link" href="#" target="_blank" rel="noopener noreferrer" title="Git">
                     <img class="logo" src="/docs/img/logo.png" alt="Hamster Logo">
                  </a>
                </li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <p class="emails">
                  If you have any questions, please contact us at <br>
                  <a href="mailto:hamster@hamsternet.io" target="_self" rel="noreferrer noopener">
                  hamster@hamsternet.io
                  </a>
                </p>
              </li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                  <p class="right">
                    <nav class="social-links">
                        <a class="social-link" href="https://github.com/hamster-shared" target="_blank" rel="noopener noreferrer" title="Git">
                         <img class="icon" src="/docs/img/socials/git.svg" alt="Git Icon">
                        </a>
                        <a class="social-link" href="https://twitter.com/Hamsternetio" target="_blank" rel="noopener noreferrer" title="Twitter">
                        <img class="icon" src="/docs/img/socials/twitter.svg" alt="Twitter Icon">
                        </a>
                        <a class="social-link" href="https://discord.gg/MrJWxRwXpb" target="_blank" rel="noopener noreferrer" title="Discord">
                          <img class="icon" src="/docs/img/socials/discord.svg" alt="Discord Icon">
                        </a>
                        <a class="social-link" href="https://hamsternet.medium.com" target="_blank" rel="noopener noreferrer" title="Medium">
                          <img class="icon" src="/docs/img/socials/medium.svg" alt="Medium Icon">
                        </a>
                    </nav>
                  </p>
              </li></ul></div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.fbb72bec.js"></script>
<script src="/docs/assets/js/main.525dba21.js"></script>
</body>
</html>